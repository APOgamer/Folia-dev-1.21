From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Spottedleaf <Spottedleaf@users.noreply.github.com>
Date: Wed, 31 Jul 2024 11:27:24 -0700
Subject: [PATCH] Disable spark profiler

It's not thread-safe. The plugin instead needs to be used.

diff --git a/src/main/java/io/papermc/paper/SparksFly.java b/src/main/java/io/papermc/paper/SparksFly.java
index c7c396a7a94c35d973eb0796f8aba6e669ed5b7c..4e8ef2aeca4d9e67e53868de720a17bf08720ea0 100644
--- a/src/main/java/io/papermc/paper/SparksFly.java
+++ b/src/main/java/io/papermc/paper/SparksFly.java
@@ -108,7 +108,7 @@ public final class SparksFly {
 
     private void enable() {
         if (!this.enabled) {
-            if (GlobalConfiguration.get().spark.enabled) {
+            if (false) { // Folia - region threading
                 this.enabled = true;
                 this.spark.enable();
             } else {
